---
import ColSectionWrapper from "../../commons/ColSectionWrapper.astro";
import ShadowImg from "../../commons/ShadowImg.astro";
import CtaButton from "../../commons/CtaButton.astro";
import { BASE_PATH, IMG_PLACEHOLDER } from "../../../consts";
import { getItemListStructuredData } from '../../../utils/structuredData';
import firstContent from '../../../assets/homeImgs/firstContent.jpg';
import secondContent from '../../../assets/homeImgs/secondContent.jpeg';
import thirdContent from '../../../assets/homeImgs/thirdContent.jpg';

interface SectionData {
  title: string;
  description: string;
  alt: string;
  imgSrc?: string;
  reverse?: boolean;
  ctaHref: string;
  ctaLabel: string;
}

const sections: SectionData[] = [
  {
    title: "RECENSIONI? Nah,<br /> parola troppo seria",
    description:
      `<span itemprop="reviewBody">
        Qui si racconta <em>con ironia</em>, <em>leggerezza</em> e <span style="font-style: italic;">un pizzico di follia</span>. <br />
        <br /> <strong>Battute, colpi di scena e verità scomode</strong>… 
        <br /> Il tutto condito dal <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">mio modesto commento non richiesto</span></span>, ovviamente. <br /> <br />
        Se un posto è deludente, <strong>lo capirai tra le righe</strong> (o <em>tra le risate</em>). <br />
        Se invece è <strong>da urlo</strong>: <span style="text-transform: uppercase;">lo urlo io per prima!</span> <br /> <br />
        <span itemprop="description">Ti ci porterò col pensiero</span> 
        (o almeno <em>ti farò venire voglia di andarci</em>)
      </span>`,
    alt: "Illustrazione di una recensione divertente",
    imgSrc: firstContent.src ?? IMG_PLACEHOLDER,
    ctaHref: "/articoli",
    ctaLabel: "Scopri di più",
  },
  {
    title: "PIATTI, POSTI E POST <br />CHE NON TI ASPETTI",
    description:
      `<span itemprop="reviewBody">
        Sono <strong>Anna</strong>: viaggiatrice affamata, esploratrice di sapori <br /> e <em>fan dichiarata dei supermercati</em> <br />
        (sì, quelli con corsie infinite e prodotti strani che ti fissano dallo scaffale). <br /> <br />
        Se un posto è <strong>bizzarro</strong>, ci devo andare. <br />
        Se è <em>sfizioso</em> e particolare, te lo racconto. <br /> <br />
        Che si tratti di un <strong>ristorante</strong>, un <strong>bar</strong>, un <strong>pub</strong> o magari di 
        <em>ricette proposte da food blogger</em>, proverò tutto e commenterò <span style="font-style: italic;">senza filtri</span>. <br /> <br />
        In più, troverai anche <strong>rubriche speciali</strong>: quella in cui mi aggiro nei supermercati come un’investigatrice con il carrello. <br /> <br />
        Scovo <em>novità assurde</em>, <em>snack che sembrano esperimenti</em> 
        e prodotti che ti faranno dire <q>io questo lo provo!</q> (oppure <q>mai nella vita</q>).
      </span>`,
    alt: "Immagine di ricerca articoli",
    imgSrc: secondContent.src ?? IMG_PLACEHOLDER,
    reverse: true,
    ctaHref: "/cerca",
    ctaLabel: "Scopri di più",
  },
  {
    title: "Cultura sì,<br /> ma con leggerezza <br />(e snack in borsa)",
    description:
      `<span itemprop="reviewBody">
        Tra musei che <em>ti guardano male se ridi</em> — io ho riso. <br /> 
        E tra <strong>esperienze culturali non convenzionali</strong> 
        che arricchiscono… anche il <em>repertorio di figuracce</em>. <br /> <br />
        Che si tratti del classico <strong>museo d’arte contemporanea</strong> — dove c’è sempre qualcuno che fotografa la scritta 
        EXIT pensando sia un’installazione (e forse lo è) — o di <em>musei dedicati alle cose più insolite</em>, io ci vado. E ne scrivo. <br />
        Ma non solo arte: racconterò anche <strong>esperienze particolari</strong>, di quelle che non sai se <em>ridere, piangere</em> 
        o fare entrambe le cose insieme. <br /> 
        Tipo la <q>cena al buio</q>, durante la quale ho passato due ore a chiacchierare 
        con uno sconosciuto convinta fosse il mio amico Ambrogio. <strong>(Non era Ambrogio.)</strong>
      </span>`,
    alt: "Foto di un locale insolito",
    imgSrc: thirdContent.src ?? IMG_PLACEHOLDER,
    ctaHref: "/locali",
    ctaLabel: "Scopri di più",
  },
];

// Generazione JSON-LD

const canonicalUrl = `${Astro.site?.toString()}${BASE_PATH.slice(1)}/`;
const siteUrl = canonicalUrl ?? 'http://localhost:4321';
const itemListJSON = getItemListStructuredData(
  sections.map((section) => ({
    name: section.title,
    url: `${siteUrl}#home-content`,
    description: section.description,
  }))
);
---

<section id="home-content" aria-label="Contenuto del blog commenti.non.richiesti" class="bg-[var(--color-primary)]" itemscope
  itemtype="https://schema.org/ItemList">
  {sections.map(({ title, description, alt, imgSrc, reverse, ctaHref, ctaLabel }) => (
    <ColSectionWrapper isColReverse={reverse}>
      <Fragment slot={reverse ? "right" : "left"}>
        <ShadowImg src={imgSrc} alt={alt} shadowOffsetLeft={reverse ? "left-4" : "-left-4"} bgColor="bg-[var(--color-accent)]" />
      </Fragment>
      <Fragment slot={reverse ? "left" : "right"}>
        <h2 class="text-2xl font-bold text-(--color-accent)" set:html={title}>{title}</h2>
        <p class="text-(--color-contrast)" set:html={description}>{description}</p>
        <CtaButton btnContent={ctaLabel} href={ctaHref} cntClass="text-(--color-accent)" aStyle="border-bottom-color: var(--color-accent);" btnLabel="Vai alla sezione"/>
      </Fragment>
    </ColSectionWrapper>
  ))}
</section>
<meta itemprop="name" content="Descrizione del sito" />
<meta itemprop="url" content={siteUrl} />

<script type="application/ld+json" set:html={itemListJSON}/>
